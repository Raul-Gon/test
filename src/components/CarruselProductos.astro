---
import IMAGENES from "../data/imagenes.json";

---


<div class="my-8">
    <div class="relative w-full overflow-hidden px-4">
    <!-- Carrusel -->
        <div id="carousel" class="flex transition-transform gap-3 duration-500 ease-in-out -mx-2">
            <!-- Lista de items -->
            <ul class="flex space-x-4">
                {IMAGENES.map(imagen => <li class="w-1/4 flex-shrink-0">
                                          <img class="flex-shrink-0" src= {imagen.url} />
                                          <h3 class="text-center">{imagen.modelo}</h3>
                                          <p>{imagen.descripcion}</p>
                                          <p>{imagen.precio}</p>
                                        </li>
                              )
                }
            </ul>
        </div>

        <!-- Botones -->
        <button id="prev" class="absolute left-2 top-1/2 -translate-y-1/2 bg-white hover:bg-gray-400 text-black px-2 py-1 shadow hidden">←</button>
        <button id="next" class="absolute right-2 top-1/2 -translate-y-1/2 bg-white hover:bg-gray-400 text-black px-2 py-1 shadow">→</button>
    </div>
</div>

<script>
  const carousel = document.getElementById('carousel');
  const nextBtn = document.getElementById('next');
  const prevBtn = document.getElementById('prev');
  
  // Datos del carrusel
  const totalItems = carousel.querySelectorAll('li').length;
  const visibleItems = 4;
  const itemWidth = carousel.querySelector('li').offsetWidth;
  let currentIndex = 0;

  function updateCarousel() {
    const offset = currentIndex * itemWidth;
    carousel.style.transform = `translateX(-${offset}px)`;

    // Mostrar u ocultar botones
    prevBtn.classList.toggle('hidden', currentIndex === 0);
    nextBtn.classList.toggle('hidden', currentIndex >= totalItems - visibleItems);
  }

  nextBtn.addEventListener('click', () => {
    if (currentIndex < totalItems - visibleItems) {
      currentIndex += visibleItems;
      updateCarousel();
    }
  });

  prevBtn.addEventListener('click', () => {
    if (currentIndex > 0) {
      currentIndex -= visibleItems;
      updateCarousel();
    }
  });

  // Inicialización
  updateCarousel();

  // Para manejar el redimensionamiento de la ventana
  window.addEventListener('resize', () => {
    updateCarousel();
  });
</script>
